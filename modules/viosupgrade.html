

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>viosupgrade – Upgrades the Virtual I/O Server &mdash; IBM Power Systems VIOS 1.0.2-beta documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Playbooks" href="../playbooks.html" />
    <link rel="prev" title="viosecure – Configures security hardening rules and firewall" href="viosecure.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> IBM Power Systems VIOS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modules.html#module-reference">Module reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="alt_root_vg.html">alt_root_vg – Create/Cleanup an alternate rootvg disk on a VIOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="backupios.html">backupios – Creates an installable image of the root volume group</a></li>
<li class="toctree-l3"><a class="reference internal" href="updateios.html">updateios – Updates the Virtual I/O Server to the latest maintenance level</a></li>
<li class="toctree-l3"><a class="reference internal" href="viosbr.html">viosbr – Backup/Restore the configuration of the VIOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="viosecure.html">viosecure – Configures security hardening rules and firewall</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">viosupgrade – Upgrades the Virtual I/O Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-values">Return Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../playbooks.html">Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Roles</a></li>
</ul>
<p class="caption"><span class="caption-text">Community Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html#helpful-links">Helpful Links</a></li>
</ul>
<p class="caption"><span class="caption-text">Requirements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Releases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBM Power Systems VIOS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../modules.html">Modules</a> &raquo;</li>
        
      <li>viosupgrade – Upgrades the Virtual I/O Server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/IBM/ansible-power-vios/blob/dev-collection/docs/source/modules/viosupgrade.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="viosupgrade-upgrades-the-virtual-i-o-server">
<span id="viosupgrade-module"></span><h1>viosupgrade – Upgrades the Virtual I/O Server<a class="headerlink" href="#viosupgrade-upgrades-the-virtual-i-o-server" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id2">Requirements</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id3">Parameters</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id4">Notes</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id5">Examples</a></p></li>
<li><p><a class="reference internal" href="#return-values" id="id6">Return Values</a></p></li>
<li><p><a class="reference internal" href="#status" id="id7">Status</a></p></li>
</ul>
</div>
<div class="section" id="synopsis">
<h2><a class="toc-backref" href="#id1">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>Performs the operations of backing up the virtual and logical configuration data, installing the specified image, and restoring the virtual and logical configuration data of the Virtual I/O Server (VIOS).</p>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The below requirements are needed on the host that executes this module.</p>
<ul class="simple">
<li><p>VIOS &gt;= 2.2.6.30</p></li>
<li><p>Python &gt;= 2.7</p></li>
</ul>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id3">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl>
<dt>image_file (True, str, None)</dt><dd><p>Specifies the image file that must be used for the installation on an alternative disk.</p>
</dd>
<dt>mksysb_install_disks (True, list, None)</dt><dd><p>Specifies the alternative disks to install the available VIOS image.</p>
<p>The current <code class="docutils literal notranslate"><span class="pre">rootvg</span></code> disk on the VIOS partition is not impacted by this installation. The VIOS partition remains in the running state during the installation of the alternative disk.</p>
<p>The size of the target disks must be greater than or equal to 30G.</p>
<p>The disks that are specified must not be in use.</p>
</dd>
<dt>filename (optional, str, None)</dt><dd><p>Specifies the file that contains the list of files that need to be backed up from the current system and saved in the new VIOS installed image. Each line must contain a single filename along with its path. Multiple files must be specified in separate new lines.</p>
</dd>
<dt>cluster (optional, bool, None)</dt><dd><p>Specifies that cluster-level backup and restore operations are performed. Mandatory for a VIOS that is part of an SSP cluster.</p>
<p>If not set, cluster membership is determined automatically.</p>
</dd>
<dt>timeout (optional, int, 60)</dt><dd><p>Specifies the timeout (in minutes) to wait for the upgrade to complete.</p>
</dd>
<dt>post_install_binary (optional, str, None)</dt><dd><p>Specifies a binary to execute after the restore process of the VIOS metadata configuration is successful.</p>
</dd>
<dt>forcecopy (optional, bool, False)</dt><dd><p>Copies the list of backup files to the respective directories in the newly installed rootvg disks.</p>
</dd>
<dt>skipclusterstate (optional, bool, False)</dt><dd><p>Skips the verification of the SSP cluster state, so that the installation can be triggered on multiple VIOS nodes simultaneously.</p>
<p>You must ensure that all the SSP cluster nodes are not in <code class="docutils literal notranslate"><span class="pre">DOWN</span></code> state at the same time as this can bring down the SSP cluster completely.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id4">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The level of the target mksysb image must be at version 3.1.0.00, or later.</p></li>
<li><p>Installations through this module are of the type New and Complete installation. Any customized configurations that might exist on the currently running system before the installation starts (including the timezone), are not included in the new installation image.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">altinst_rootvg</span></code> or <code class="docutils literal notranslate"><span class="pre">old_rootvg</span></code> disks are already available in the VIOS, you must rename them.</p></li>
</ul>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Perform the VIOS upgrade operation on new rootvg disks hdisk1 and hdisk2</span>
  <span class="nt">viosupgrade</span><span class="p">:</span>
    <span class="nt">image_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mymksysbA</span>
    <span class="nt">mksysb_install_disks</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">hdisk1</span><span class="p p-Indicator">,</span><span class="nv">hdisk2</span><span class="p p-Indicator">]</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Upgrade the VIOS that belongs to an SSP cluster</span>
  <span class="nt">viosupgrade</span><span class="p">:</span>
    <span class="nt">image_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mymksysbA</span>
    <span class="nt">mksysb_install_disks</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">hdisk1</span><span class="p p-Indicator">,</span><span class="nv">hdisk2</span><span class="p p-Indicator">]</span>
    <span class="nt">cluster</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Copy files from the current rootvg disk to a newly installed VIOS image</span>
  <span class="nt">viosupgrade</span><span class="p">:</span>
    <span class="nt">image_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mymksysbA</span>
    <span class="nt">mksysb_install_disks</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">hdisk1</span><span class="p p-Indicator">,</span><span class="nv">hdisk2</span><span class="p p-Indicator">]</span>
    <span class="nt">filename</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file_list_name</span>
</pre></div>
</div>
</div>
<div class="section" id="return-values">
<h2><a class="toc-backref" href="#id6">Return Values</a><a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>msg (always, str, )</dt><dd><p>The execution message.</p>
</dd>
<dt>stdout (always, str, )</dt><dd><p>The standard output</p>
</dd>
<dt>stderr (always, str, )</dt><dd><p>The standard error</p>
</dd>
<dt>old_rootvg (always, list, [‘hdisk0’])</dt><dd><p>The list of disks that are part of the old_rootvg after the upgrade</p>
</dd>
<dt>ioslevel (always, dict, {‘ioslevel’: {‘before’: ‘3.1.0.00’, ‘after’: ‘3.1.1.00’}})</dt><dd><p>The installed maintenance level of the system before and after the upgrade</p>
<dl class="simple">
<dt>before (always, str, )</dt><dd><p>The installed maintenance level of the system before the upgrade</p>
</dd>
<dt>after (success, str, )</dt><dd><p>The installed maintenance level of the system after the upgrade</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id7">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This module is not guaranteed to have a backwards compatible interface. <em>[preview]</em></p></li>
<li><p>This module is maintained by community.</p></li>
</ul>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>AIX Development Team (&#64;pbfinley1911)</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../playbooks.html" class="btn btn-neutral float-right" title="Playbooks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="viosecure.html" class="btn btn-neutral float-left" title="viosecure – Configures security hardening rules and firewall" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, IBM

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>